# 1. æ•™ç¨‹ç®€ä»‹

   ä¸€é”®å°†æ”¶è—é“¾æ¥è‡³é£ä¹¦è¡¨æ ¼å·¥ä½œæµã€‚

## å°†ä¼šå­¦åˆ°ä»€ä¹ˆ

1. æ­å»ºæ€è·¯
2. ç†Ÿæ‚‰difyå·¥ä½œæµ
3. difyå†…è°ƒç”¨é£ä¹¦api


## æµç¨‹å›¾

![æµç¨‹å›¾](https://github.com/user-attachments/assets/3492e2f9-ccf0-45ae-9670-a17608f728c7)

# 2. å‡†å¤‡å·¥ä½œ

## 2.1 æ·»åŠ  internlm 2.5 æ¨¡å‹ 
è¿›å…¥ç¡…åŸºæµåŠ¨å®˜ç½‘ï¼šhttps://cloud.siliconflow.cn/s/internlm

ç‚¹å‡»â€œAPIå¯†é’¥â€å¤åˆ¶å¯†é’¥ 
![å¤åˆ¶å¯†é’¥](https://github.com/user-attachments/assets/6e31de94-c3e7-46ac-a651-e748dd3ca2d7)

ç‚¹å‡»â€œå¤´åƒâ€ï¼Œç‚¹å‡»â€œè®¾ç½®â€,â€œæ¨¡å‹ä¾›åº”å•†â€é‡Œé€‰æ‹©â€œSILICONFLOWâ€,ç‚¹å‡»â€œè®¾ç½®â€ï¼Œå¡«å…¥api key,æ¨¡å‹åˆ—è¡¨å¯ä»¥çœ‹åˆ°internlm 2.5
![è®¾ç½®1](https://github.com/user-attachments/assets/8a83bb6d-ad60-4df0-9715-e1254dd3ae9e)
![è®¾ç½®2](https://github.com/user-attachments/assets/5aa9331d-955d-45b4-9ca9-c4f6cf045c21)
![è®¾ç½®3](https://github.com/user-attachments/assets/235927bb-7035-4f44-b71c-aadb7f2e83f3)
![è®¾ç½®4](https://github.com/user-attachments/assets/7053ce1c-1b92-4817-861e-2a7323ec644d)

# 2.2 åˆ›å»ºå·¥ä½œæµ

â€œåˆ›å»ºç©ºç™½åº”ç”¨â€----â€œå·¥ä½œæµâ€

![åˆ›å»ºå·¥ä½œæµ](https://github.com/user-attachments/assets/edce4ab1-2d3a-47af-8f7e-90e0597addec)

# 2.3 é£ä¹¦å¤šç»´è¡¨æ ¼å»ºç«‹

å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œè¿›è¡Œä¿®æ”¹ã€‚ä»¥ä¸‹ä»…ä¸ªäººåœ¨è®¾è®¡å­—æ®µæ—¶çš„ä¸€äº›æ€è·¯ã€‚

**2.3.1 è¡¨æ ¼è®¾è®¡å‰æ€è€ƒä¸ºä»€ä¹ˆè¦æ”¶è—è¿™ç¯‡æ–‡ç« **

â‘  å±äºä»€ä¹ˆé¢†åŸŸï¼Œå±äºä»€ä¹ˆæ€§è´¨ï¼ˆç§‘æ™®ã€çº¯æŠ€æœ¯ã€å®æ“....ï¼‰ï¼Œä»€ä¹ˆé˜¶æ®µï¼ˆåˆçº§ã€ä¸­çº§ã€è¿›é˜¶....ï¼‰ç­‰ç­‰......

â‘¡ æ–‡ç« ä¼ é€’çš„ä»€ä¹ˆï¼Œå¦‚ï¼šè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿæå‡ºä»€ä¹ˆè§‚ç‚¹ï¼Ÿä»‹ç»ä»€ä¹ˆæ–°æŠ€æœ¯ï¼Ÿè®©ä½ è§‰å¾—å€¼å¾—ç»†çœ‹çš„ç‚¹åœ¨äºï¼Ÿç­‰ç­‰......

â‘¢ åˆ«äººæ¨èçš„ï¼Œä½†æ˜¯ç°åœ¨æ²¡ç©ºç»†çœ‹ï¼Œå…ˆæ”¶å½•ä¸€ä¸‹

**2.3.2 è¡¨æ ¼è®¾è®¡**

```å­—æ®µè¯´æ˜```å¦‚ä¸‹ï¼š

| å­—æ®µå     | é£ä¹¦å­—æ®µç±»å‹ | å­—æ®µè¯´æ˜                                                                 |
|------------|---------------|--------------------------------------------------------------------------|
| æ ‡é¢˜       | æ–‡æœ¬        | æ ‡é¢˜                                                                     |
| é“¾æ¥       | æ–‡æœ¬        | åˆ†äº«çš„é“¾æ¥ï¼Œç‚¹å‡»å³å¯è·³è½¬é˜…è¯»                                               |
| æ‘˜è¦       | æ–‡æœ¬        | é€šç¯‡å¤§æ¦‚è®²äº†ä»€ä¹ˆï¼Œå¯ä»¥ç”±çˆ¬è™«æ’ä»¶ç”Ÿæˆ                              |
| æ¥æº       | å•é€‰        | æ¥è‡ªå“ªä¸ªå¹³å°ï¼Œå¦‚ï¼šbç«™ã€å°çº¢ä¹¦ã€ç½‘ç«™ç­‰ç­‰ã€‚åç»­å¦‚æœæ‰©å±•åšæ•°æ®ç»Ÿè®¡æ—¶å¯ä½œä¸ºä¸€é¡¹åˆ†ç±»æŒ‡æ ‡   |
| å½¢å¼   | å•é€‰         | å±•ç°å½¢å¼ï¼šå›¾æ–‡ï¼ˆçº¯æ–‡ä¹Ÿå½’åˆ°è¿™ç±»ï¼‰ã€è§†é¢‘                                                                |
| tag       | å¤šé€‰         | æŒ‰é¢†åŸŸã€åŠŸèƒ½ç­‰åšä¸€ä¸ªåˆ’åˆ†ï¼Œä¹Ÿå¯ä»¥ç§°å®ƒä¸ºæŸä¸ªåˆé›†ï¼Œæ¯”å¦‚äº§å“ã€AIã€å¤§æ¨¡å‹ç­‰                    |
| çŠ¶æ€       | å•é€‰         | å·²é˜…è¯»ã€æœªé˜…è¯»                                                             |
| æ”¶é›†æ—¥æœŸ   | æ–‡æœ¬        | å†™å…¥è¡¨æ ¼æ—¥æœŸï¼Œå› ä¸ºé£ä¹¦æ—¶é—´æ ¼å¼å’Œæ’ä»¶æ—¶é—´æ ¼å¼æœ‰å‡ºå…¥ï¼Œæˆ‘å¤ªæ‡’äº†ä¸æƒ³åšå¤„ç†ï¼Œç›´æ¥è®¾ç½®æ–‡æœ¬å‹ |
| æ”¶è—åŸå›    | æ–‡æœ¬        | ä¸ºä»€ä¹ˆè¦æ”¶å½•è¿™ç¯‡                                                          |
| è¯»åæ„Ÿ     | æ–‡æœ¬        | è¯»åæ„Ÿ                                                                   |
| ä»·å€¼ç­‰çº§   | å•é€‰        | è¿™ç¯‡æ–‡ç« å«é‡‘é‡æ€ä¹ˆæ ·ï¼Œå¯è‡ªå·±è®¾ç½®å€¼ï¼Œæ¯”å¦‚ï¼šä½ã€ä¸­ã€é«˜                          |

**<font color=#FF0000>æ³¨æ„ï¼ï¼æ–°å»ºçš„å¤šç»´è¡¨æ ¼å›¾ä¸­æ ‡å‡ºçš„ä½ç½®ä¸€å®šä¸èƒ½æ˜¯wiki</font>**

![å¤šç»´è¡¨æ ¼å›¾](https://github.com/user-attachments/assets/afe374de-e304-4140-8d7d-5da7fe54b800)

**<font color=#FF0000>ä¸ªäººç”¨æˆ·ä¸è¦ä»äº‘æ–‡æ¡£é‡Œæ–°å»ºï¼Œç›´æ¥ä»å¤šç»´è¡¨æ ¼æ–°å»º</font>**

![æ–°å»º](https://github.com/user-attachments/assets/ab855228-d2d1-4a12-9bd8-e905cb3a2364)

![ç©ºè¡¨ç¤ºä¾‹](https://github.com/user-attachments/assets/9ddd717f-fc23-4a8c-91d0-b7346436fb26)

**2.3.3 å…³äºåˆ†äº«é“¾æ¥**

**æ•´ç†å‡ºè‡ªå·±å¸¸çœ‹å¹³å°çš„åˆ†äº«é“¾æ¥**

æ¯”å¦‚æˆ‘å¸¸çœ‹çš„å¹³å°åˆ†äº«é“¾æ¥å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºæœ‰äº›å¹³å°åˆ†äº«é“¾æ¥éœ€è¦åšä¸€ä¸ªæå–```httpsé“¾æ¥```å¤„ç†çš„ã€‚

```å°çº¢ä¹¦åˆ†äº«é“¾æ¥```ï¼š

```
93 ã€å¤§è¿ï½œ4å¤©21é¡¿â£ï¸äººå°‘å˜å˜å¥½åƒï¼Œæœ¬åœ°äººæ¨èâ€¼ï¸ - é©¬æºœè¾¾ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† lR3gT9A0eAQ5XWn ğŸ˜† https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```


```æŠ–éŸ³åˆ†äº«é“¾æ¥```ï¼š

```
9.99 Eus:/ 12/21 J@i.Ch å¤§è¿åƒä¸‡çº§åšä¸»æ€»ç»“çš„å¤§è¿æ—…æ¸¸æ³¨æ„äº‹é¡¹ï¼Œçœ‹è¿™ä¸€ä¸ªå°±è¶³å¤Ÿè¶³å¤Ÿäº† # å¤§è¿æ—…æ¸¸æ”»ç•¥ # å¤§è¿ # å¤§è¿ç¾é£Ÿ   https://v.douyin.com/iksNQqte/ å¤åˆ¶æ­¤é“¾æ¥ï¼Œæ‰“å¼€DouéŸ³æœç´¢ï¼Œç›´æ¥è§‚çœ‹è§†é¢‘ï¼
```

```å…¬ä¼—å·æ–‡ç« åˆ†äº«é“¾æ¥```ï¼š

```
https://mp.weixin.qq.com/s/d8mvSU77l_xAHKo3gqyPGQ
```

```Bç«™åˆ†äº«é“¾æ¥```ï¼š

```
ã€SOLIDWORKS æ•™å­¦ ç²¾å“æ•™ç¨‹ | 2024å¹´æ–°ä¿® | Bç«™ ç‚¹èµ æ’­æ”¾ æ”¶è— NO.1ã€‘ https://www.bilibili.com/video/BV1iw411Z7HZ/?share_source=copy_web&vd_source=93b749d0faa4f6da4b3a9891caf73e4d
```

```youtubeåˆ†äº«é“¾æ¥```ï¼š

```
https://youtu.be/siHNmXLZ8y4?si=2KwcS5wElJBK4Eva
```

# 3. æ­å»ºå†…å®¹æ”¶è—å·¥ä½œæµ

ä¹‹å‰å·²ç»åœ¨cozeæ­å»ºå¹¶è·‘é€šï¼Œcozeçš„æ•™ç¨‹æ˜¯ä¸€è¾¹è®¾è®¡ä¸€è¾¹å†™çš„ï¼Œdifyè¿™è¾¹ç›´æ¥æ‹¿å·²è·‘é€šçš„æ€è·¯æ¥å†™ã€‚

æ•™ç¨‹è¿˜å­˜åœ¨ä¸€ç‚¹çš„ç¼ºé™·æ˜¯å…³äºè·å–é£ä¹¦user_access_token è¿™æ–¹é¢ï¼Œç­‰æœ‰ç©ºäº†å¯¹è¿™å—è¿›è¡Œä»£ç è°ƒæ•´ï¼Œç°åœ¨å°±éº»çƒ¦ç‚¹æ¯æ¬¡æ‰‹åŠ¨æˆæƒäº†ã€‚

## 3.1 å®šä¹‰è¾“å…¥å˜é‡

æ ¹æ®è¡¨æ ¼æ¥çœ‹ï¼Œæˆ‘ä»¬è¦æ–°å¢çš„è¾“å…¥å˜é‡åˆ†åˆ«æœ‰```é“¾æ¥```ã€```å½¢å¼```ã€```tag```ã€```æ”¶è—åŸå› ```ã€‚

![å˜é‡åˆ†ç±»](https://github.com/user-attachments/assets/d7fad01a-d455-4c40-a4d8-10e32a35f08c)

åˆ¤æ–­æ˜¯å¦è¦è¿›è¡Œé“¾æ¥æå–ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸€ä¸ªbooleanå€¼çš„å˜é‡ä½œä¸ºåˆ¤æ–­ã€‚

![æ–°å¢å˜é‡](https://github.com/user-attachments/assets/d0775e71-8ef1-4ea7-8e75-abe0c3a833a3)

æ³¨æ„urlå˜é‡çš„é•¿åº¦éœ€è¦æ›´æ”¹ã€‚

![urlå˜é‡é•¿åº¦](https://github.com/user-attachments/assets/9ea1ef01-5069-448a-b49d-7cfe7c7c67c1)

![handleå˜é‡é…ç½®](https://github.com/user-attachments/assets/8ee83cb5-66e4-405a-83c0-f6fcd830562c)

## 3.2 æ·»åŠ é€šç”¨å˜é‡-æ—¶é—´

![æ·»åŠ æ—¶é—´å·¥å…·](https://github.com/user-attachments/assets/f948baf3-6fda-4a9c-84b7-006a5e21211c)

## 3.3 åˆ¤æ–­å½¢å¼-å›¾æ–‡orè§†é¢‘

æ³¨æ„ï¼šäº‹å…ˆæˆ‘ä»¬è§„å®šå¥½genreï¼ˆå½¢å¼ï¼‰åªèƒ½æ˜¯å›¾æ–‡ æˆ– è§†é¢‘ã€‚

åŒºåˆ†ä¸¤ç§å½¢å¼æ˜¯å› ä¸ºï¼Œçˆ¬è™«å¯¹è§†é¢‘ç±»çˆ¬å–å†…å®¹ä¸å¤ªå°½äººæ„ï¼Œå¯¹å›¾æ–‡æ¯”è¾ƒå‹å¥½ã€‚æ‰€ä»¥æœ¬æ•™ç¨‹å¯¹è§†é¢‘ç±»```åªåšæ ‡é¢˜å½•å…¥ä¸è‡ªåŠ¨ç”Ÿæˆæ‘˜è¦```

æ·»åŠ ```æ¡ä»¶åˆ†æ”¯```ï¼Œåˆ¤æ–­æ˜¯```å›¾æ–‡```è¿˜æ˜¯```è§†é¢‘```ã€‚å¦‚æœæ›´ä¸¥è°¨ç‚¹ï¼Œå¯ä»¥åŠ ä¸€ä¸ª```ELIF```æ˜¯"å›¾æ–‡"ã€‚

![æ¡ä»¶åˆ†æ”¯](https://github.com/user-attachments/assets/c5675773-a8c5-4f9c-ba30-12ce0e6a2eb0)

## 3.4 è§†é¢‘ç±»æ”¶è—å¤„ç†

### 3.4.1 åˆ¤æ–­æ˜¯å¦è¦è¿›è¡Œé“¾æ¥å¤„ç†
   
æ·»åŠ ```æ¡ä»¶åˆ†æ”¯```ï¼Œåˆ¤æ–­handleå˜é‡ï¼ˆhandleä¸ºtrueæ—¶éœ€è¦å¤„ç†ï¼Œfalseä¸éœ€è¦å¤„ç†ï¼‰

![åˆ¤æ–­æ˜¯å¦è¦è¿›è¡Œé“¾æ¥å¤„ç†](https://github.com/user-attachments/assets/eb042435-8502-44e0-bb90-1c537227721d)

### 3.4.2 æå–æ ‡é¢˜+urlåœ°å€+å¹³å°åç§°ï¼ˆhandleä¸ºtrueåˆ†æ”¯å¤„ç†ï¼‰

éœ€è¦åš2ä»¶äº‹ï¼š

â‘  å–å‡ºurlåœ°å€

â‘¡ å–å‡ºæ–‡å­—å¹¶ç”±å¤§æ¨¡å‹è¿›è¡Œç†è§£ã€åŠ å·¥æ ‡é¢˜

**1. æ·»åŠ å¹¶é…ç½®ä»£ç èŠ‚ç‚¹**

é€‰æ‹©ç”¨ä»£ç èŠ‚ç‚¹çš„åŸå› æ˜¯å¤§æ¨¡å‹èŠ‚ç‚¹æœ‰æ—¶å€™å¹¶ä¸èƒ½100%èƒ½æŒ‰ç…§è¦æ±‚æå–ï¼Œç”¨ä»£ç èŠ‚ç‚¹æ›´å¯é äº›ã€‚

æ·»åŠ ```ä»£ç æ‰§è¡Œ```èŠ‚ç‚¹ï¼Œè®¾ç½®è¾“å…¥è¾“å‡ºå˜é‡ã€‚

![æ·»åŠ èŠ‚ç‚¹](https://github.com/user-attachments/assets/ec69834a-1a3c-4c95-b258-8bd897ee88a3)

![é…ç½®è¾“å…¥è¾“å‡º](https://github.com/user-attachments/assets/de115a26-951f-4503-a4e9-40e32ee93942)

**2. ä»£ç æå–æ–‡å­—+urlåœ°å€**

![æµç¨‹å›¾](https://github.com/user-attachments/assets/dbd70598-b2d5-4085-8dac-a278fbc90e0e)

â‘  æŸ¥æ‰¾ URL èµ·å§‹ä½ç½®ï¼šä½¿ç”¨ find() æ–¹æ³•æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­ http:// æˆ– https:// çš„èµ·å§‹ä½ç½®ã€‚å¦‚æœæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªï¼Œå°±è®°å½•è¿™ä¸ªä½ç½®ä½œä¸º URL çš„èµ·å§‹ä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœ‰æ•ˆçš„ URL èµ·å§‹ä½ç½®ï¼Œè¿”å› "æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆurl"ã€‚

â‘¡ æŸ¥æ‰¾ URL ç»“æŸä½ç½®ï¼šåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ end ä¸º URL çš„èµ·å§‹ä½ç½®ã€‚ä½¿ç”¨ while å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œé€ä¸ªæ£€æŸ¥å­—ç¬¦ï¼Œç»§ç»­å‘åç§»åŠ¨ end ä½ç½®ï¼Œç›´åˆ°é‡åˆ°ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€é€—å·ã€å¥å·æˆ–å…¶ä»–æ ‡å¿—ç€ URL çš„ç»“æŸæ ‡ç‚¹ç¬¦å·ã€‚

â‘¢ æˆªå– URLï¼šä½¿ç”¨ç¡®å®šçš„èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œä»è¾“å…¥å­—ç¬¦ä¸²ä¸­æˆªå– URLã€‚å»æ‰å¯èƒ½å­˜åœ¨çš„å‰åç©ºç™½ã€‚

â‘£ ç›®å‰çœ‹å‡ ä¸ªåˆ†äº«å¹³å°çš„æ–‡å­—éƒ½æ˜¯åœ¨é“¾æ¥å‰é¢ï¼Œæš‚å®šä»é“¾æ¥å‰å¼€å§‹æå–ï¼Œåç»­å¦‚æœæœ‰åœ¨åé¢çš„ï¼Œå¢æ·»å¤„ç†

```
def main(input: str) -> dict:
    # æå– URL éƒ¨åˆ†ï¼ŒæŸ¥æ‰¾ "http://" æˆ– "https://" çš„èµ·å§‹ä½ç½®
    start = input.find("http://")
    if start == -1:
        start = input.find("https://")
    
    if start != -1:
        # æŸ¥æ‰¾ URL æœ«å°¾çš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€é€—å·ã€å¥å·ç­‰ä½œä¸ºç»ˆæ­¢ä½ç½®
        end = start  # åˆå§‹åŒ–ç»“æŸä½ç½®ä¸ºèµ·å§‹ä½ç½®
        while end < len(input) and input[end] not in [" ", "\n", ",", "ã€‚", "ï¼Œ", "ï¼Ÿ"]:
            end += 1

        # æˆªå– URL
        url = input[start:end].strip()
    else:
        url = "æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆé“¾æ¥"
    
    # æå–æ–‡å­—éƒ¨åˆ†
    text = input[:start].strip() if start != -1 else input.strip()

    return {"url": url, "text": text}

```

ç‚¹å‡»```æµ‹è¯•```æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚

![æµ‹è¯•æŒ‰é’®](https://github.com/user-attachments/assets/e742891b-227b-4113-9718-ae744d3c8e91)

ç»™å¤§å®¶è´´å‡ºå‡ ä¸ªä¸åŒå¹³å°çš„è§†é¢‘åˆ†äº«é“¾æ¥ç”¨æ¥æµ‹è¯•ã€‚æ›¿æ¢æµ‹è¯•é“¾æ¥æ—¶ï¼Œå…‰æ ‡ç‚¹è¿›è¾“å…¥æ ï¼Œctrl+aï¼Œå³å¯å…¨éƒ¨é€‰ä¸­ï¼š

![å¿«é€Ÿæ›¿æ¢é“¾æ¥](https://github.com/user-attachments/assets/14aacbb5-1c54-44b6-9ad8-a0bf3ddecec2)

```æŠ–éŸ³åˆ†äº«é“¾æ¥ï¼š```

```
9.99 Eus:/ 12/21 J@i.Ch å¤§è¿åƒä¸‡çº§åšä¸»æ€»ç»“çš„å¤§è¿æ—…æ¸¸æ³¨æ„äº‹é¡¹ï¼Œçœ‹è¿™ä¸€ä¸ªå°±è¶³å¤Ÿè¶³å¤Ÿäº† # å¤§è¿æ—…æ¸¸æ”»ç•¥ # å¤§è¿ # å¤§è¿ç¾é£Ÿ   https://v.douyin.com/iksNQqte/ å¤åˆ¶æ­¤é“¾æ¥ï¼Œæ‰“å¼€DouéŸ³æœç´¢ï¼Œç›´æ¥è§‚çœ‹è§†é¢‘ï¼
```

```Bç«™åˆ†äº«é“¾æ¥ï¼š```

```
ã€SOLIDWORKS æ•™å­¦ ç²¾å“æ•™ç¨‹ | 2024å¹´æ–°ä¿® | Bç«™ ç‚¹èµ æ’­æ”¾ æ”¶è— NO.1ã€‘ https://www.bilibili.com/video/BV1iw411Z7HZ/?share_source=copy_web&vd_source=93b749d0faa4f6da4b3a9891caf73e4d
```

```å°çº¢ä¹¦åˆ†äº«é“¾æ¥ï¼š```

```
73 ã€å«ä½ å°ä¼—ç‚¹ä½†æ²¡å«ä½ é•¿å¾—è¿™ä¹ˆå°ä¼—å•Š - ä¸€åŒ¹é©¬é©¬é©¬ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† CFeen1R75oQXpqv ğŸ˜† https://www.xiaohongshu.com/discovery/item/66f8b234000000001a022942?source=webshare&xhsshare=pc_web&xsec_token=AB-MKTF5OW0KnR_GOEvmkDuu5K92ZmQJ6CPTIN-PmOmpc=&xsec_source=pc_share
```

**æµ‹è¯•ç»“æœï¼š**

![å°çº¢ä¹¦](https://github.com/user-attachments/assets/ad02fb00-1a6a-4391-8a7b-3bec8093e444)

**3. æç‚¼æ ‡é¢˜+å¹³å°åç§°**

æ·»åŠ ```LLM```èŠ‚ç‚¹ï¼Œé€‰æ‹©"internlm/internlm2_5-7b-chat"æ¨¡å‹ã€‚è¿™é‡Œä¸éœ€è¦ä¸Šä¸‹æ–‡ï¼Œåªéœ€è¦åœ¨ç³»ç»Ÿæç¤ºè¯å†…å¼•ç”¨ä»£ç èŠ‚ç‚¹è¾“å‡ºçš„ä¸¤ä¸ªå˜é‡ã€‚

![é…ç½®æˆªå›¾](https://github.com/user-attachments/assets/1e7fcb9d-aad8-4b55-8ce7-8e9b35260ddb)

```æç¤ºè¯ï¼š```

**è¾“å…¥{ ï¼Œå¯ä»¥å¿«é€Ÿé€‰æ‹©å˜é‡**

```
# åˆ†äº«é“¾æ¥æ ‡é¢˜æå–æç¤ºè¯

ä½ æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºä»ä»»ä½•ç¤¾äº¤åª’ä½“åˆ†äº«é“¾æ¥ä¸­æå–æ ‡é¢˜çš„AIåŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯ä»ç»™å®šçš„æ–‡æœ¬ä¸­è¯†åˆ«å¹¶æå–å‡ºæœ€ç›¸å…³çš„æ ‡é¢˜æˆ–ä¸»è¦å†…å®¹æè¿°ï¼Œå¹¶ç›´æ¥è¿”å›ç»“æœï¼Œä¸æ·»åŠ ä»»ä½•é¢å¤–çš„æ ¼å¼æˆ–è¯´æ˜ã€‚

## æŒ‡ä»¤ï¼š

1. ä»”ç»†åˆ†æç»™å®šçš„{{}}ï¼Œå¯»æ‰¾è¡¨ç¤ºè§†é¢‘æˆ–æ–‡ç« ä¸»è¦å†…å®¹çš„å…³é”®å¥å­æˆ–çŸ­è¯­ã€‚
2. æ ¹æ®{{}}è¯†åˆ«å‡ºå¹³å°åç§°ï¼Œä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ï¼Œåªä¿ç•™1ä¸ªåç§°ï¼Œä¸æ·»åŠ æ‹¬å·å’Œå…¶ä»–å¤‡æ³¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
   - ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰
   - é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§°
   - ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§°
3. æå–å‡ºæœ€èƒ½æ¦‚æ‹¬å†…å®¹ä¸»é¢˜çš„å¥å­æˆ–çŸ­è¯­ã€‚
4. å¦‚æœå­˜åœ¨å¤šä¸ªå¯èƒ½çš„æ ‡é¢˜ï¼Œé€‰æ‹©æœ€å®Œæ•´ã€æœ€æœ‰ä¿¡æ¯é‡çš„ä¸€ä¸ªã€‚
5. ç›´æ¥è¿”å›æå–å‡ºçš„æ ‡é¢˜ï¼Œä¸è¦æ·»åŠ ä»»ä½•è§£é‡Šã€æ ¼å¼æˆ–é¢å¤–çš„è¯„è®ºã€‚
6. ä¸è¦ä½¿ç”¨å¼•å·æˆ–å…¶ä»–æ ‡ç‚¹ç¬¦å·åŒ…è£¹æå–çš„æ ‡é¢˜ã€‚

ç°åœ¨ï¼Œè¯·æ ¹æ®ä»¥ä¸ŠæŒ‡ä»¤å¤„ç†ç»™å®šçš„æ–‡æœ¬ï¼Œå¹¶ç›´æ¥æå–å‡ºæœ€ç›¸å…³çš„æ ‡é¢˜æˆ–ä¸»è¦å†…å®¹æè¿°ã€‚åŒæ—¶æå–å‡ºå¹³å°åç§°ã€‚
```

**æµ‹è¯•ç»“æœï¼š**

ä¾æ—§æ˜¯å¯¹è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œç»™å¤§å®¶è´´å‡ºå‡ ä¸ªæµ‹è¯•è¾“å…¥ï¼š

```æµ‹è¯•è¾“å…¥ï¼š```

```
  "url": "https://www.xiaohongshu.com/discovery/item/66f8b234000000001a022942?source=webshare&xhsshare=pc_web&xsec_token=AB-MKTF5OW0KnR_GOEvmkDuu5K92ZmQJ6CPTIN-PmOmpc=&xsec_source=pc_share",
  "text": "73 ã€å«ä½ å°ä¼—ç‚¹ä½†æ²¡å«ä½ é•¿å¾—è¿™ä¹ˆå°ä¼—å•Š - ä¸€åŒ¹é©¬é©¬é©¬ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† CFeen1R75oQXpqv ğŸ˜†"
```

```
  "url": "https://www.bilibili.com/video/BV1iw411Z7HZ/?share_source=copy_web&vd_source=93b749d0faa4f6da4b3a9891caf73e4d",
  "text": "ã€SOLIDWORKS æ•™å­¦ ç²¾å“æ•™ç¨‹ | 2024å¹´æ–°ä¿® | Bç«™ ç‚¹èµ æ’­æ”¾ æ”¶è— NO.1ã€‘"
```

```
   "url": "https://v.douyin.com/iksNQqte/",
   "text": "9.99 Eus:/ 12/21 J@i.Ch å¤§è¿åƒä¸‡çº§åšä¸»æ€»ç»“çš„å¤§è¿æ—…æ¸¸æ³¨æ„äº‹é¡¹ï¼Œçœ‹è¿™ä¸€ä¸ªå°±è¶³å¤Ÿè¶³å¤Ÿäº† # å¤§è¿æ—…æ¸¸æ”»ç•¥ # å¤§è¿ # å¤§è¿ç¾é£Ÿ"
```

![Bç«™](https://github.com/user-attachments/assets/0d12ed8c-573e-42e3-9c9d-086134dd3f71)

![æŠ–éŸ³](https://github.com/user-attachments/assets/adc9f09a-9594-4800-a4dd-034f2cfabc5f)


### 3.4.3 æå–urlåœ°å€+æ ¹æ®reasonæç‚¼æ ‡é¢˜+å¹³å°åç§°ï¼ˆhandleä¸ºfalseåˆ†æ”¯å¤„ç†ï¼‰

å¯¹äºåªæœ‰urlåœ°å€çš„ï¼Œéœ€è¦åš2ä»¶äº‹æƒ…ï¼š
1. è¾“å‡ºurlåœ°å€ï¼ˆè¿™æ­¥ä¸ç”¨å¤„ç†ï¼Œæ€ä¹ˆè¾“å…¥çš„å°±æ€ä¹ˆè¾“å‡ºï¼‰
2. æ ¹æ®reasonï¼ˆæ”¶è—ç†ç”±ï¼‰æç‚¼å‡ºæ ‡é¢˜


åœ¨elseè¾“å‡ºä½ç½®ï¼Œæ·»åŠ ```LLM```èŠ‚ç‚¹ï¼Œé€‰æ‹©"internlm/internlm2_5-7b-chat"æ¨¡å‹ã€‚è¿™é‡Œä¸éœ€è¦ä¸Šä¸‹æ–‡ï¼Œåªéœ€è¦åœ¨ç³»ç»Ÿæç¤ºè¯å†…å¼•ç”¨reasonå˜é‡ã€‚

![elseè¿çº¿](https://github.com/user-attachments/assets/09617f8b-95ef-4a54-96ff-8f1f45b1ef8c)

![é…ç½®](https://github.com/user-attachments/assets/3a2fb1ad-0c6d-49c7-b273-7c1b6679743a)


```æç¤ºè¯ï¼š```

```
## æŒ‡ä»¤ï¼š
1. ä»”ç»†åˆ†æç»™å®šçš„{{å¼€å§‹èŠ‚ç‚¹è¾“å…¥çš„url}}ï¼Œè¯†åˆ«å‡ºå¹³å°åç§°ï¼Œä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„ä¸­æ–‡æˆ–è‹±æ–‡åç§°ï¼Œåªä¿ç•™1ä¸ªåç§°ï¼Œä¸æ·»åŠ æ‹¬å·æˆ–å…¶ä»–å¤‡æ³¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
 - ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰
 -é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§°
 -ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§°
2.ä»”ç»†åˆ†æç»™å®šçš„{{å¼€å§‹èŠ‚ç‚¹è¾“å…¥çš„reason}}ï¼Œæç‚¼å‡ºä¸å¤§äº10ä¸ªå­—çš„æ ‡é¢˜ï¼Œç¡®ä¿æ ‡é¢˜å‡†ç¡®ã€ç®€æ´ä¸”å…·æœ‰ä¿¡æ¯é‡ã€‚
3.ç›´æ¥è¿”å›å¹³å°åç§°å’Œæç‚¼åçš„æ ‡é¢˜ï¼Œä¸è¦æ·»åŠ ä»»ä½•è§£é‡Šã€æ ¼å¼æˆ–é¢å¤–çš„è¯„è®ºã€‚
4.è¿”å›ç»“æœå¿…é¡»åŒ…å« å¹³å°åç§° å’Œ æ ‡é¢˜ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   å¹³å°åç§°ï¼š
   æ ‡é¢˜ï¼š

```

**æµ‹è¯•ç»“æœï¼š**

å¯¹è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œç»™å¤§å®¶è´´å‡ºå‡ ä¸ªæµ‹è¯•è¾“å…¥ï¼Œè¿™é‡Œé€‰çš„æ˜¯youtubeåˆ†äº«é“¾æ¥ï¼š

```æµ‹è¯•è¾“å…¥ï¼š```

```
  "url": "https://youtu.be/siHNmXLZ8y4?si=2KwcS5wElJBK4Eva",
  "reason": "How to make Talking Clock using RTC DS1307 and Arduino | Arduino Talking Clock with Alarm"
```

![youtube](https://github.com/user-attachments/assets/d8b7ae3a-a48b-4e62-9a67-fdd4bd90653f)

### 3.4.4 æ€»ç»“

åœ¨è¿™ä¸€å°ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ äº†ï¼š

1. æ–°å¢å˜é‡
2. æ¡ä»¶é€‰æ‹©åˆ†æ”¯
3. æ·»åŠ å®˜æ–¹å‘å¸ƒçš„å·¥å…·èŠ‚ç‚¹
4. å•ä¸ªèŠ‚ç‚¹å¦‚ä½•æµ‹è¯•

![æ•´ä½“å›¾](https://github.com/user-attachments/assets/ceb6f3c4-0fd4-40cc-92b7-df0f0bce6157)

## 3.5 å›¾æ–‡ç±»æ”¶è—å¤„ç†

å›¾æ–‡ç±»çˆ¬å–å‹å¥½ï¼Œä¸ç”¨æ ¹æ®reasonæ¥ç”Ÿæˆæ ‡é¢˜ï¼Œåªéœ€è¦æå–å‡ºåœ°å€å°±è¡Œã€‚è¿™é‡Œå°±å·ä¸ªæ‡’ï¼Œç»Ÿä¸€éƒ½ä»```æå–urlåœ°å€```èŠ‚ç‚¹èµ°ä¸€éã€‚

**<font color=#FF0000>æœ¬å·¥ä½œæµä¸å¯è‡ªåŠ¨æ”¶è—çŸ¥ä¹ï¼Œå®ƒåçˆ¬è™«</font>**


### 3.5.1 æå–urlåœ°å€

å’Œè§†é¢‘ç±»å¤„ç†ä¸€æ ·ï¼Œè¿™é‡Œå»æ‰æå–æ–‡å­—çš„éƒ¨åˆ†

![é…ç½®å›¾](https://github.com/user-attachments/assets/97bafbce-988e-47c1-b355-c1000cc15c3d)

```
def main(input: str) -> dict:
    # æå– URL éƒ¨åˆ†ï¼ŒæŸ¥æ‰¾ "http://" æˆ– "https://" çš„èµ·å§‹ä½ç½®
    start = input.find("http://")
    if start == -1:
        start = input.find("https://")
    
    if start != -1:
        # æŸ¥æ‰¾ URL æœ«å°¾çš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€é€—å·ã€å¥å·ç­‰ä½œä¸ºç»ˆæ­¢ä½ç½®
        end = start  # åˆå§‹åŒ–ç»“æŸä½ç½®ä¸ºèµ·å§‹ä½ç½®
        while end < len(input) and input[end] not in [" ", "\n", ",", "ã€‚", "ï¼Œ", "ï¼Ÿ"]:
            end += 1

        # æˆªå– URL
        url = input[start:end].strip()
    else:
        url = "æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆé“¾æ¥"
    
    # æå–æ–‡å­—éƒ¨åˆ†
    text = input[:start].strip() if start != -1 else input.strip()

    return {"url": url, "text": text}
```

**æµ‹è¯•ç»“æœ**

```æµ‹è¯•ç”¨ä¾‹ï¼š```

```å°çº¢ä¹¦åˆ†äº«é“¾æ¥```ï¼š

```
93 ã€å¤§è¿ï½œ4å¤©21é¡¿â£ï¸äººå°‘å˜å˜å¥½åƒï¼Œæœ¬åœ°äººæ¨èâ€¼ï¸ - é©¬æºœè¾¾ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† lR3gT9A0eAQ5XWn ğŸ˜† https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```

```CSDNåˆ†äº«é“¾æ¥```ï¼š

```
https://blog.csdn.net/lmy_520/article/details/142108199?fromshare=blogdetail&sharetype=blogdetail&sharerId=142108199&sharerefer=PC&sharesource=ColorKin&sharefrom=from_link
```

![å°çº¢ä¹¦](https://github.com/user-attachments/assets/07a02e60-fde7-4142-b5e7-bce36be5e33c)

![CSDN](https://github.com/user-attachments/assets/3d1e0aa2-ad62-40ce-ad1e-5fe038fac451)

### 3.5.2 å¯¹é“¾æ¥è¿›è¡Œçˆ¬å–

è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç”¨```jina AI ```çš„```è·å–å•é¡µé¢```å·¥å…·ã€‚

![æ·»åŠ å·¥å…·](https://github.com/user-attachments/assets/c9b34c6b-daeb-49b7-9b00-8fef57c94cf1)

ç‚¹å‡»"æˆæƒ"ï¼Œå¯ä»¥ä¸å¡«å†™APIå¯†é’¥ï¼Œç›´æ¥ä¿å­˜ã€‚

![æˆæƒ](https://github.com/user-attachments/assets/af29bb36-0d4e-4b38-9eb9-f12c7fa12a72)

è¿™é‡Œæ·»åŠ ä¸Šä¸ªèŠ‚ç‚¹æå–è¿‡æ¥çš„urlåœ°å€ã€‚

![é…ç½®](https://github.com/user-attachments/assets/4e80edea-89c6-42a6-b185-216dd396afd1)

ä¸æ¡ä»¶åˆ†æ”¯çš„elseè¿çº¿ã€‚

![elseè¿çº¿](https://github.com/user-attachments/assets/28787e47-8215-4f98-9f9f-e7525e143b2e)


**æµ‹è¯•ç»“æœ**

æµ‹è¯•ç”¨ä¾‹ï¼š

```å°çº¢ä¹¦ï¼š```

```
https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```

```å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼š```

```
https://mp.weixin.qq.com/s/CbvVt4nKwqwhJx1ovoLLJw
```

![å°çº¢ä¹¦](https://github.com/user-attachments/assets/553e28fa-e47f-4655-9fe5-5ad71f7909d1)

![å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ](https://github.com/user-attachments/assets/d66c2583-16c4-4376-93cc-465e211a9976)

### 3.5.3 ä»£ç èŠ‚ç‚¹å¯¹çˆ¬å–å†…å®¹è¿›è¡Œé•¿åº¦å¤„ç†

å¤§æ¨¡å‹è®¾ç½®è¾“å…¥è¾“å‡ºé•¿åº¦æ˜¯æœ‰ä¸€å®šçš„é™åˆ¶çš„ï¼Œçˆ¬å–çš„å†…å®¹å¤ªé•¿ä½œä¸ºè¾“å…¥ä¼šå‡ºç°æŠ¥é”™ï¼Œæˆ‘ä»¬è¦åšä¸€ä¸ªå¤„ç†ã€‚

æ‰¾äº†ä¸€ç¯‡ç¯‡å¹…è¾ƒé•¿çš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ä½œä¸ºä¸‹é¢çš„æµ‹è¯•ã€‚

```
https://mp.weixin.qq.com/s/CbvVt4nKwqwhJx1ovoLLJw
```

çˆ¬å–èŠ‚ç‚¹æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿”å›ç»“æœæ˜¯ä¸€ä¸ªmarkdownæ ¼å¼ï¼Œå¹¶ä¸”dataé‡ŒåŒ…å«äº†"title"ã€"url"ã€"content"ã€"description"ã€‚æ‰€ä»¥åœ¨å¤„ç†æ—¶ï¼Œä»ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å‡ºå‘ï¼š

1. å°†è¾“å…¥çš„å­—ç¬¦ä¸²è§£æä¸ºJSONå¯¹è±¡
2. æå–æ‰€éœ€çš„å­—æ®µ
3. å»é™¤æ ¼å¼å¤„ç†
4. å¯¹contentæˆªå–å‰1000ä¸ªå­—ç¬¦
5. æ„å»ºç»“æœå­—å…¸

```
import json
import re

def remove_markdown(text: str) -> str:
    # å»é™¤Markdowné“¾æ¥æ ¼å¼ [title](url)
    text = re.sub(r'\[([^\[]+)\]\([^\)]+\)', r'\1', text)
    # å»é™¤Markdownå›¾ç‰‡æ ¼å¼ ![alt](url)
    text = re.sub(r'!\[(.*?)\]\((.*?)\)', r'\1', text)
    # å»é™¤Markdown * æ–œä½“å’Œ _ æ–œä½“ä»¥åŠ ** åŠ ç²—å’Œ __ åŠ ç²—
    text = re.sub(r'\*\*([^*]+)\*\*', r'\1', text)
    text = re.sub(r'__([^_]+)__', r'\1', text)
    text = re.sub(r'\*([^*]+)\*', r'\1', text)
    text = re.sub(r'_([^_]+)_', r'\1', text)
    # å»é™¤Markdown ``` ä»£ç å—
    text = re.sub(r'```.*?```', r'', text, flags=re.S)
    # å»é™¤Markdown - åˆ—è¡¨
    text = re.sub(r'^\s*-\s.*?$', r'', text, flags=re.M)
    # å»é™¤Markdown 1. åˆ—è¡¨
    text = re.sub(r'^\s*\d+\.\s.*?$', r'', text, flags=re.M)
    return text

def main(input: str) -> dict:
    # å°†è¾“å…¥çš„å­—ç¬¦ä¸²è§£æä¸ºJSONå¯¹è±¡
    input_data = json.loads(input)
    
    # æå–dataå­—æ®µ
    data = input_data.get('data', {})
    
    # æå–æ‰€éœ€çš„å­—æ®µ
    title = data.get('title', '')
    description = data.get('description', '')
    url = data.get('url', '')
    content = data.get('content', '')
    
    # å»Markdownæ ¼å¼å¤„ç†
    content = remove_markdown(content)
    
    # æˆªå–å‰1000ä¸ªå­—ç¬¦
    content = content[:1000]
    
    # æ„å»ºç»“æœå­—å…¸
    result = {
        'title': title,
        'description': description,
        'url': url,
        'content': content
    }
    
    return result
```

**æµ‹è¯•**

æˆ‘ç”¨ä¸‹é¢2ç¯‡ä½œä¸ºæµ‹è¯•ï¼Œä¸€ç¯‡æ˜¯å¾®ä¿¡å…¬ä¼—å·é•¿æ–‡ï¼Œä¸€ç¯‡å°çº¢ä¹¦çŸ­ç¯‡å›¾æ–‡ã€‚

```
https://mp.weixin.qq.com/s/CbvVt4nKwqwhJx1ovoLLJw
```

```
93 ã€å¤§è¿ï½œ4å¤©21é¡¿â£ï¸äººå°‘å˜å˜å¥½åƒï¼Œæœ¬åœ°äººæ¨èâ€¼ï¸ - é©¬æºœè¾¾ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† lR3gT9A0eAQ5XWn ğŸ˜† https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```

å°†ä»£ç èŠ‚ç‚¹è¿æ¥åˆ°```ç»“æŸ```èŠ‚ç‚¹ï¼Œä»£ç èŠ‚ç‚¹çš„contentä½œä¸ºè¾“å‡ºï¼Œç‚¹å‡»```è¿è¡Œ```

![è¿çº¿](https://github.com/user-attachments/assets/9db6b559-da2f-4c3f-bd71-d17b5bb1eddd)

![è¿è¡Œ](https://github.com/user-attachments/assets/07b318dc-97e4-40e0-afaa-d27e285ca6ee)

![è¾“å…¥](https://github.com/user-attachments/assets/02a5f1e0-17e4-438f-9f82-3ec05316bc29)

**ç»“æœ**

ç‚¹å‡»```è¿½è¸ª```ï¼Œå±•å¼€èŠ‚ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºåŸºæœ¬æ˜¯å¯¹çš„ã€‚

![å¾®ä¿¡è¿è¡Œç»“æœ_1](https://github.com/user-attachments/assets/713335ac-a41d-4ee8-a2a1-272c0b4e8de3)

![å¾®ä¿¡è¿è¡Œç»“æœ_2](https://github.com/user-attachments/assets/a24d8d58-605f-402f-ba10-22cc7b440844)

å°çº¢ä¹¦çš„contentå’Œdescriptionæ˜¯ä¸€æ ·çš„ï¼Œåé¢æˆ‘ä»¬åªç”¨åˆ°æˆªå–çš„contentï¼Œè¿™é‡Œå°±ä¸åšå¤„ç†äº†ã€‚

![å°çº¢ä¹¦](https://github.com/user-attachments/assets/3b3a35e4-f76e-4be4-b4f4-9ba5c942cfc3)

### 3.5.4 LLMèŠ‚ç‚¹å¯¹contentç”Ÿæˆæ‘˜è¦

æ·»åŠ ```LLM```èŠ‚ç‚¹å¹¶è¿çº¿ï¼Œå†™å…¥æç¤ºè¯ã€‚

è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼Œè¾“å…¥{ å¿«é€Ÿé€‰æ‹©å˜é‡ï¼Œ```æç¤ºè¯```å¦‚ä¸‹ï¼š

```
# ä»»åŠ¡
æ ¹æ®{{}}ï¼Œç”Ÿæˆå¯¹åº”ä¿¡æ¯
 
# è¾“å‡ºè¦æ±‚
åŒ…å«2ä¸ªå˜é‡ï¼šsummaryã€siteName
summaryï¼šæ ¹æ®{{}}å†…å®¹çš„ä¸»é¢˜ç”Ÿæˆä¸€æ®µç®€æ´è€Œå…¨é¢çš„æ‘˜è¦ï¼Œä¸è¶…è¿‡100å­—ã€‚
siteNameï¼šåªéœ€è¦å›ç­”{{}}å½’å±ä»€ä¹ˆå¹³å°ï¼Œä¸ç”¨é¢å¤–è§£é‡Šã€‚ä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ï¼Œåªä¿ç•™1ä¸ªåç§°ï¼Œä¸æ·»åŠ æ‹¬å·æˆ–å…¶ä»–å¤‡æ³¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
   - ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰
   - é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§°
   - ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§°
```

![é…ç½®](https://github.com/user-attachments/assets/e8f4491c-2e5a-4dd0-995b-f28a7852753d)

**æµ‹è¯•**

è®°å¾—**èŠ‚ç‚¹è¿æ¥ç»“æŸèŠ‚ç‚¹**ï¼Œå¯ä»¥çœ‹åˆ°ä»¥æˆ‘ä»¬æƒ³è¦çš„æ ¼å¼è¾“å‡ºäº†ã€‚

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/dbfb995e-921c-4b99-93cc-6208b072e0bb)

### 3.5.5 æå–æ‘˜è¦å’Œå¹³å°

æ–°å»º```å‚æ•°æå–```ï¼Œè®¾ç½®æ¨¡å‹ã€æ–°å»ºè¾“å‡ºå‚æ•°ã€‚å¦‚å›¾æ‰€ç¤ºï¼š

![æå–å‚æ•°](https://github.com/user-attachments/assets/ee345e57-156d-452f-9cd7-046c0addffe6)

**æç¤ºè¯**

```
# å‚æ•°æå–å™¨æç¤ºè¯

ä½ æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæå–æ‘˜è¦å’Œå¹³å°çš„å°åŠ©æ‰‹ï¼Œç›´æ¥è¿”å›ç»“æœï¼Œä¸æ·»åŠ ä»»ä½•é¢å¤–çš„æ ¼å¼æˆ–è¯´æ˜ã€‚

## æŒ‡ä»¤ï¼š

1. ä»”ç»†åˆ†æç»™å®šçš„{{#1727687145150.text#}}ï¼Œè¯†åˆ«å‡ºæ‘˜è¦å’Œå¹³å°åç§°ã€‚å¹³å°åç§°ä½¿ç”¨æœ€å¸¸è§ã€æœ€æ­£å¼çš„åç§°ï¼Œåªä¿ç•™1ä¸ªåç§°ï¼Œä¸æ·»åŠ æ‹¬å·å’Œå…¶ä»–å¤‡æ³¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
   - ä½¿ç”¨å¹³å°çš„å®˜æ–¹ä¸­æ–‡åç§°ï¼ˆå¦‚æœæœ‰ï¼‰
   - é¿å…ä½¿ç”¨ç¼©å†™æˆ–éæ­£å¼çš„åˆ«ç§°
   - ä¿æŒåç§°çš„ä¸€è‡´æ€§ï¼Œæ¯æ¬¡å¯¹åŒä¸€å¹³å°ä½¿ç”¨ç›¸åŒçš„åç§°

2. summaryæ˜¯æ‘˜è¦è¿”å›å‚æ•°ï¼Œsitenameæ˜¯å¹³å°è¿”å›å‚æ•°ã€‚

ç°åœ¨ï¼Œè¯·æ ¹æ®ä»¥ä¸ŠæŒ‡ä»¤å¤„ç†ç»™å®šçš„æ–‡æœ¬ï¼Œå¹¶ç›´æ¥æå–å‡ºæœ€ç›¸å…³çš„æ ‡é¢˜æˆ–ä¸»è¦å†…å®¹æè¿°ã€‚åŒæ—¶æå–å‡ºå¹³å°åç§°ã€‚
```

**èŠ‚ç‚¹æµ‹è¯•**

æµ‹è¯•æ–‡æœ¬

```
summary: è¯¥ç¬”è®°å†…å®¹å±•ç°äº†ä¸€åªå¾·æ–‡å·æ¯›çŒ«åœ¨æ˜¥å­£çš„å¯çˆ±ç¬é—´ï¼Œé€šè¿‡é«˜è´¨é‡çš„å›¾ç‰‡å’Œæ¸©é¦¨çš„æ–‡æ¡ˆï¼Œä¼ é€’å‡ºæ˜¥å¤©çš„ç”Ÿæœºä¸ç¾å¥½ã€‚å†…å®¹ä¸ä»…æåˆ°äº†å¾·æ–‡å·æ¯›çŒ«çš„å“ç§ç‰¹ç‚¹ï¼Œè¿˜è¡¨è¾¾äº†å¯¹å® ç‰©çš„çˆ±æŠ¤å’Œæ˜¥å¤©çš„æœŸå¾…ã€‚\n\nsiteName: å°çº¢ä¹¦"
```

```æµ‹è¯•ç»“æœ```

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/33440578-4123-4ac9-b110-f1090727ad54)

### 3.5.6 å‡†å¤‡å†™å…¥å·¥ä½œ

æˆªæ­¢ä¸Šé¢ï¼Œæˆ‘ä»¬åŸºæœ¬å®Œæˆå¯¹å›¾æ–‡ç±»çš„å¤„ç†ï¼Œç°åœ¨è¦è¿›è¡Œ```å†™è¿›é£ä¹¦è¡¨æ ¼```æ“ä½œã€‚

é€‰æ‹©```å·¥å…·```ï¼Œæ·»åŠ ```åœ¨å¤šç»´è¡¨æ ¼æ•°æ®è¡¨ä¸­æ–°å¢ä¸€æ¡è®°å½•```

![æ–°å¢èŠ‚ç‚¹](https://github.com/user-attachments/assets/632bdcb2-1f0d-41cb-8cfe-0ddf2d318a8c)

ç”±å›¾ä¸­å¯å¾—çŸ¥ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä»¥ä¸‹å·¥ä½œï¼š

1. API çš„è®¿é—®å‡­è¯å‚æ•°ï¼Œtenant_access_token æˆ– user_access_tokenï¼ˆè¿™é‡Œæˆ‘ä»¬é€‰æ‹© **user_access_token** æ›´æ–¹ä¾¿ä¸€ç‚¹ï¼‰
2. å¤šç»´è¡¨æ ¼çš„å”¯ä¸€æ ‡è¯†ç¬¦ app_token
3. å¤šç»´è¡¨æ ¼æ•°æ®è¡¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ table_id
4. ä¼ è¿‡å»çš„å†…å®¹éœ€è¦æ‹¼æ¥+å¤„ç†

![èŠ‚ç‚¹è¯¦ç»†](https://github.com/user-attachments/assets/5ace6ee7-e821-42e1-88e8-3720157f18dc)

## 3.6 é£ä¹¦å¤šç»´è¡¨æ ¼æ¥å…¥

### 3.6.1 è‡ªå»ºé£ä¹¦åº”ç”¨

ç™»å½•[å¼€å‘è€…åå°](https://open.feishu.cn/app)ï¼Œåˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨ã€‚

åˆ›å»ºå®Œæˆåä¼šè¿›å…¥ä¸‹å›¾é¡µé¢ã€‚**<font color=#FF0000>è‡ªå·±åœ¨æ–¹ä¾¿çš„åœ°æ–¹ä¿å­˜idå’Œsecretï¼Œåç»­éœ€è¦ç”¨åˆ°</font>**

![å‡­è¯](https://github.com/user-attachments/assets/137b28a0-e57e-4b26-948d-b8efba0a152c)

### 3.6.2 é‡å®šå‘URL

>åœ¨å¼€å‘ç½‘é¡µåº”ç”¨çš„ç”¨æˆ·ç™»å½•æ“ä½œæ—¶ï¼Œå¼€æ”¾å¹³å°ä¼šé€šè¿‡ OAuth 2.0 åè®®æˆæƒç”¨æˆ·ç™»å½•å¹¶å‘åº”ç”¨åå°æä¾›ç”¨æˆ·çš„èµ„æºå’Œä¿¡æ¯ã€‚åœ¨æˆæƒç™»å½•è¿‡ç¨‹ä¸­ï¼Œå¼€æ”¾å¹³å°ä¼šå¯¹ç½‘é¡µè¿›è¡Œå®‰å…¨æ ¡éªŒï¼Œåªæœ‰é…ç½®åœ¨åº”ç”¨é‡å®šå‘ URL åˆ—è¡¨å†…çš„ç½‘é¡µåœ°å€å¯ä»¥é€šè¿‡å®‰å…¨æ ¡éªŒã€‚é€šè¿‡æœ¬æ–‡ä½ å¯ä»¥äº†è§£åº”ç”¨éœ€è¦é…ç½®é‡å®šå‘ URL çš„åœºæ™¯ï¼Œä»¥åŠå¦‚ä½•é…ç½®é‡å®šå‘ URLã€‚

åœ¨ã€å¼€å‘é…ç½®ã€‘----ã€å®‰å…¨è®¾ç½®ã€‘é¡µé¢é…ç½®é‡å®šå‘URLè®¾ç½®```difyåœ°å€ï¼š```https://cloud.dify.ai/

![é‡å®šå‘URL](https://github.com/user-attachments/assets/16e1a4e0-5bbd-430c-97c6-247fc6bf82c3)

```è¡¥å……ï¼š```åœ¨åº”ç”¨çš„é‡å®šå‘ URL åˆ—è¡¨å†…é…ç½®çš„ URLï¼Œ? æˆ– # åç¼€ä¸ä¼šç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼Œhttp://www.example.com/#/index ä½œä¸ºé‡å®šå‘ URL æ—¶ï¼Œå®é™…ç”Ÿæ•ˆçš„ URL ä¸º http://www.example.comã€‚

### 3.6.3 ä¸ºä»€ä¹ˆé€‰æ‹©user_access_tokenï¼Ÿ

ç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œ[è·å–è®¿é—®å‡­è¯](https://open.feishu.cn/document/server-docs/api-call-guide/calling-process/get-access-token)ã€‚

ç»“åˆè®¿é—®å‡­è¯ä»‹ç»ï¼Œå¯ä»¥çœ‹å‡ºä¸€ä¸ªé¢å‘ç”¨æˆ·ç©ºé—´ï¼Œä¸€ä¸ªé¢å‘åº”ç”¨ã€‚

![é€‰æ‹©](https://github.com/user-attachments/assets/6ffbdc30-5e2b-494c-b786-46035bdc4595)

æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹©```user_access_token```ã€‚

### 3.6.4 è·å–user_access_token

ç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š[è·å– user_access_token](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/authen-v1/oidc-access_token/create?appId=cli_a6718882e8b8500c)

![å¦‚ä½•è·å–user_access_token](https://github.com/user-attachments/assets/e10faed6-8219-45d1-a205-082a94a45d64)

**è·å–ç™»å½•é¢„æˆæƒç **

[è·å–ç™»å½•é¢„æˆæƒç å®˜æ–¹æ–‡æ¡£](https://open.feishu.cn/document/common-capabilities/sso/api/obtain-oauth-code)

![è¯·æ±‚](https://github.com/user-attachments/assets/71de0c59-b107-4a76-9bcd-a86b120fd571)

çœ‹æ–‡æ¡£æˆ‘ä»¬è¦è¿›è¡Œ```ç”³è¯·APIæƒé™```ï¼Œæˆ‘ä»¬éœ€è¦çš„æƒé™ï¼šæ–°å»ºè®°å½•ã€æ ¹æ®æ¡ä»¶æœç´¢è®°å½•

![æŸ¥è¯¢å‚æ•°](https://github.com/user-attachments/assets/92634d98-901f-4455-962c-d81c2eef1a61)

è¿›å…¥[å¼€å‘è€…åå°](https://open.feishu.cn/document/common-capabilities/sso/api/obtain-oauth-code)ï¼Œè¿›å…¥åº”ç”¨----å¼€å‘é…ç½®----æƒé™ç®¡ç†

![å¼€é€šæƒé™](https://github.com/user-attachments/assets/150cfbe0-68bf-4f4e-949b-00340b15865f)

åˆ›å»ºç‰ˆæœ¬

![å‘å¸ƒç‰ˆæœ¬](https://github.com/user-attachments/assets/61572a64-8eb1-4e6e-8d06-b20fe3cce44c)

å¤åˆ¶ä¸‹é¢çš„åœ°å€ï¼Œ```æ›¿æ¢app_id```åå¤åˆ¶åˆ°æµè§ˆå™¨ä¸­è¿›è¡Œæˆæƒã€‚

```
https://open.feishu.cn/open-apis/authen/v1/authorize?app_id=ã€æ›¿æ¢ã€‘&redirect_uri=https%3A%2F%2Fcloud.dify.ai%2F&scope=base:record:create%20base:record:retrieve&state=RANDOMSTATE
```

![æˆæƒ](https://github.com/user-attachments/assets/096e19e8-24a3-4915-8ac7-ce05f1f04662)

æˆåŠŸåä¼šè·³è½¬å›difyé¡µé¢ï¼Œæ­¤æ—¶åœ°å€æ codeåçš„å€¼å°±æ˜¯æˆ‘ä»¬è¦çš„ç™»å½•é¢„æˆæƒç ã€‚

![codeç ](https://github.com/user-attachments/assets/5683d33a-dd7d-452a-8c6e-c2e42ba70f13)

**httpè¯·æ±‚è‡ªå»ºåº”ç”¨è·å– app_access_token**

[è‡ªå»ºåº”ç”¨è·å–app_access_token](https://open.feishu.cn/document/server-docs/authentication-management/access-token/app_access_token_internal)

![è¯·æ±‚](https://github.com/user-attachments/assets/c605c3dc-2771-4864-86b9-e4f3788f51ff)

æ–°å»º```httpè¯·æ±‚```ï¼Œæ ¹æ®å¼€å‘æ–‡æ¡£è¿›è¡Œå¡«å†™

```method:``` POST

```URLï¼š``` https://open.feishu.cn/open-apis/auth/v3/app_access_token/internal

```è¯·æ±‚ä½“ï¼š```

```
{
    "app_id": "",
    "app_secret": ""
}
```

![httpè¯·æ±‚](https://github.com/user-attachments/assets/c3d8d3a2-0c62-4ae6-9f37-01f83a8b0ec3)

code:200ï¼Œè¯·æ±‚æˆåŠŸè¿”å›é™¤äº†æˆ‘ä»¬è¦çš„app_access_tokenè¿˜åŒ…å«äº†å…¶ä»–ä¿¡æ¯ï¼Œæ‰€ä»¥è¦å¯¹å®ƒè¿›è¡Œä¸€ä¸ªå‚æ•°æå–å™¨ã€‚

![æˆåŠŸè¿”å›](https://github.com/user-attachments/assets/419d9221-c214-4668-b86e-d076c16905ea)

**æå–app_access_token**

æ–°å¢ä¸€ä¸ª```å‚æ•°æå–å™¨```ï¼Œè¾“å…¥å˜é‡é€‰æ‹©ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„bodyè¾“å‡ºï¼Œæ¨¡å‹é€‰æ‹©internlmï¼Œå¡«å†™æå–æŒ‡ä»¤ã€‚

![é…ç½®å›¾](https://github.com/user-attachments/assets/6d7b1370-6b75-414e-8876-2dc5dd805e5f)

æå–æˆåŠŸï¼Œå¦‚å›¾æ‰€ç¤ºã€‚

![æå–æˆåŠŸ](https://github.com/user-attachments/assets/46d6c031-6f3e-450c-a481-9e70bef240d1)

**httpè¯·æ±‚è·å– user_access_token**

æ ¹æ®[è·å– user_access_token](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/authen-v1/oidc-access_token/create)å®˜æ–¹æ–‡æ¡£ï¼Œæ–°å»ºä¸€ä¸ªè¯·æ±‚èŠ‚ç‚¹ï¼ŒæŒ‰ç…§æ–‡æ¡£æ¥å¡«å†™ã€‚

```method:``` POST

```URLï¼š``` https://open.feishu.cn/open-apis/authen/v1/oidc/access_token

```Headersï¼š```æ³¨æ„Bearer åé¢æœ‰ä¸ªç©ºæ ¼

```
Authorizationï¼šBearer æå–çš„app_access_token

Content-Typeï¼šapplication/json

```

```è¯·æ±‚ä½“ï¼š```

```
{
    "grant_type": "authorization_code",
    "code": ""
}
```

![é…ç½®å›¾](https://github.com/user-attachments/assets/90fd840a-1139-4fe6-a800-7e4a3a292237)

codeæœ‰æ•ˆæ—¶é—´åªæœ‰5åˆ†é’Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é‡æ–°æˆæƒæ‹¿ä¸€æ¬¡ã€‚

cozeå…³äºé£ä¹¦çš„ç”Ÿæ€åšå¾—å¾ˆå¥½ï¼Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨æˆæƒã€‚

ç­‰æœ‰ç©ºäº†å¯¹è¿™å—è¿›è¡Œä»£ç è°ƒæ•´ï¼Œç°åœ¨å°±éº»çƒ¦ç‚¹æ¯æ¬¡æ‰‹åŠ¨æˆæƒäº†ã€‚

å¤åˆ¶ä¸‹é¢çš„åœ°å€ï¼Œ```æ›¿æ¢app_id```åå¤åˆ¶åˆ°æµè§ˆå™¨ä¸­è¿›è¡Œæˆæƒã€‚æ‹¿å–codeã€‚

```
https://open.feishu.cn/open-apis/authen/v1/authorize?app_id=ã€æ›¿æ¢ã€‘&redirect_uri=https%3A%2F%2Fcloud.dify.ai%2F&scope=base:record:create%20base:record:retrieve&state=RANDOMSTATE
```

è¯·æ±‚æˆåŠŸï¼Œå“åº”ä½“é‡Œè¿”å›äº†æˆ‘ä»¬è¦çš„ä¸œè¥¿ã€‚

![è¯·æ±‚ç»“æœ](https://github.com/user-attachments/assets/af4887e4-d04f-43e9-acef-4d703c858c60)

### 3.6.5 å†™å…¥é£ä¹¦è¡¨æ ¼

æˆ‘ä»¬é‡æ–°å›é¡¾ä¸‹ï¼Œåœ¨å¤šç»´è¡¨æ ¼æ–°å¢ä¸€æ¡è®°å½•çš„å·¥å…·æˆ‘ä»¬è¿˜å·®å“ªäº›å‚æ•°ã€‚

![å·¥å…·å›¾](https://github.com/user-attachments/assets/a6065457-9ea9-4faa-9a6b-847888539b29)

- [x] user_access_token
- [ ] å¤šç»´è¡¨æ ¼çš„app_token
- [ ] å¤šç»´è¡¨æ ¼çš„table_id
- [ ] æ‹¼æ¥å¹¶å¤„ç†è¿‡çš„æ–‡æœ¬

**1. å¤šç»´è¡¨æ ¼ä¿¡æ¯è·å–**

å¤åˆ¶è¡¨æ ¼é“¾æ¥åˆ°æµè§ˆå™¨ã€‚

![å¦‚ä½•å¤åˆ¶](https://github.com/user-attachments/assets/de4e6f03-2462-4f38-83b1-3ee183dbaf5b)

app_tokenå’Œtable_idå¦‚å›¾æ‰€ç¤ºã€‚

![1727775682814](https://github.com/user-attachments/assets/83345229-0318-4cb9-b2ce-13eb7c3d649b)

**2. æå–user_access_token**

æ–°å¢ä¸€ä¸ª```å‚æ•°æå–å™¨```ï¼Œè¾“å…¥å˜é‡é€‰æ‹©ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„bodyè¾“å‡ºï¼Œæ¨¡å‹é€‰æ‹©internlmï¼Œå¡«å†™æå–æŒ‡ä»¤ã€‚

![é…ç½®](https://github.com/user-attachments/assets/8f291185-7601-4dbc-bb05-f4f7e0c8dc44)

**3. æ‹¼æ¥å¹¶å¤„ç†æ–‡æœ¬**

æ ¹æ®[å¤šç»´è¡¨æ ¼æ–°å¢è®°å½•](https://open.feishu.cn/document/server-docs/docs/bitable-v1/app-table-record/create?appId=cli_a6718882e8b8500c)å®˜æ–¹æ–‡æ¡£çš„è¯·æ±‚ä½“å®ä¾‹ï¼Œæˆ‘ä»¬çš„è¯·æ±‚ä½“åº”è¯¥å¦‚ä¸‹ï¼š

```
{
  "fields": {
    "æ ‡é¢˜": "",
    "é“¾æ¥":"",
    "æ‘˜è¦": "",
     "æ¥æº": "",
     "å½¢å¼": "",
     "tag": [],
      "çŠ¶æ€": "æœªé˜…è¯»",
      "æ”¶é›†æ—¥æœŸ": "",
      "æ”¶è—åŸå› ": ""
  }
}
```

æ–°å¢ä»£ç æ‰§è¡ŒèŠ‚ç‚¹å¹¶é…ç½®è¾“å…¥å’Œ```Js```ä»£ç ã€‚

è¾“å…¥å˜é‡è®¾ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![è¾“å…¥å˜é‡é…ç½®](https://github.com/user-attachments/assets/8a08212f-71ed-4e9c-9048-03806d2d9053)

**<font color=#FF0000>jsä»£ç </font>**

```
function main({ title, url, summary, sitename, tag, date, reason, genre }) { 
    const tagArray = tag.split('ï¼Œ');

    const fields = {
        "æ ‡é¢˜": title,
        "é“¾æ¥": url,
        "æ‘˜è¦": summary,
        "æ¥æº": sitename,
        "å½¢å¼": genre,
        "tag": tagArray, 
        "çŠ¶æ€": "æœªé˜…è¯»",
        "æ”¶é›†æ—¥æœŸ": date,
        "æ”¶è—åŸå› ": reason
    };

    return {
        result: JSON.stringify(fields) 
    };
}
```

```èŠ‚ç‚¹æµ‹è¯•```

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/01cc7e41-7445-4147-b203-43589c152b60)

**4. å†™å…¥é£ä¹¦è¡¨æ ¼**

ç°åœ¨æˆ‘ä»¬éœ€è¦çš„å‚æ•°éƒ½æœ‰äº†ï¼Œå¯ä»¥è¿›è¡Œå†™å…¥é£ä¹¦è¡¨æ ¼æ“ä½œäº†ã€‚

- [x] user_access_token
- [x] å¤šç»´è¡¨æ ¼çš„app_token
- [x] å¤šç»´è¡¨æ ¼çš„table_id
- [x] æ‹¼æ¥å¹¶å¤„ç†è¿‡çš„æ–‡æœ¬

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![é…ç½®](https://github.com/user-attachments/assets/25b4be0d-5416-4f55-842c-7825941fe34d)

è¿æ¥ç»“æŸèŠ‚ç‚¹ï¼Œå¼€å§‹æµ‹è¯•ã€‚

![è¿çº¿å›¾](https://github.com/user-attachments/assets/a1ca5702-b1c5-4865-9e59-ff44fefc7baf)

è¿™é‡Œæä¾›ä¸€ç¯‡å°çº¢ä¹¦å›¾æ–‡æµ‹è¯•ç¤ºä¾‹ï¼š

```
93 ã€å¤§è¿ï½œ4å¤©21é¡¿â£ï¸äººå°‘å˜å˜å¥½åƒï¼Œæœ¬åœ°äººæ¨èâ€¼ï¸ - é©¬æºœè¾¾ | å°çº¢ä¹¦ - ä½ çš„ç”Ÿæ´»æŒ‡å—ã€‘ ğŸ˜† lR3gT9A0eAQ5XWn ğŸ˜† https://www.xiaohongshu.com/discovery/item/667aacb8000000001e010eb2?source=webshare&xsec_token=AB1e31D0BGnaywnmwX7C37dGKIbrOsxGltreE-BRB1aeE=&xsec_source=pc_share
```

åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆè¿›è¡Œä¸€æ¬¡æˆæƒï¼Œæ›¿æ¢```è·å–user_access_token```èŠ‚ç‚¹è¯·æ±‚ä½“é‡Œçš„code

![æ›¿æ¢](https://github.com/user-attachments/assets/b14f5575-ac81-4461-9c2e-e1d735b713ab)

```
https://open.feishu.cn/open-apis/authen/v1/authorize?app_id=ã€æ›¿æ¢ã€‘&redirect_uri=https%3A%2F%2Fcloud.dify.ai%2F&scope=base:record:create%20base:record:retrieve&state=RANDOMSTATE
```

è¾“å…¥èŠ‚ç‚¹ï¼š

![è¾“å…¥](https://github.com/user-attachments/assets/b4a0d708-1de0-49e3-a893-b7c40761d0ed)

**5. æµ‹è¯•ç»“æœ**

è¡¨æ ¼è§†å›¾æµ‹è¯•ç»“æœï¼š

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/9e384197-8299-4219-a529-de7b664d2953)

ç”»å†Œè§†å›¾ï¼š

![æ–°å»ºç”»å†Œ](https://github.com/user-attachments/assets/9febbace-6b2b-4a8f-9b27-87909cbacf40)

![ç”»å†Œè§†å›¾](https://github.com/user-attachments/assets/3716e0b5-bbd4-44ca-8bd8-577dfbd23a2c)

## 3.7 å®Œå–„è§†é¢‘ç±»åˆ†æ”¯

ç›®å‰æˆ‘ä»¬å›¾æ–‡åˆ†æ”¯å·²ç»å…¨éƒ¨å®Œæˆï¼Œæ•´ä½“æµç¨‹å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ ¹æ®æˆ‘ä»¬çš„è®¾å®šï¼Œè§†é¢‘ç±»ä¸å›¾æ–‡ç±»çš„åŒºåˆ«åªå·®ä¸€ä¸ªæ‘˜è¦ï¼ˆsummary)ã€‚

![æ•´ä½“å›¾](https://github.com/user-attachments/assets/3acccdf6-7aea-42a8-8f62-d110f27bb2eb)

### 3.7.1 æ‹¼æ¥å¹¶å¤„ç†æ–‡æœ¬

è§†é¢‘ç±»æ˜¯2ä¸ªåˆ†æ”¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯è¦å°†2ä¸ªè¾“å‡ºåˆå¹¶ä¸º1ä¸ªè¾“å…¥æ¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚è¾“å‡ºå‚æ•°ï¼šurlã€sitenameã€title

**1. å¯¹å‰2ä¸ªè¾“å‡ºè¿›è¡Œå‚æ•°æå–**

åˆ†åˆ«æ–°å¢2ä¸ªå‚æ•°æå–å™¨ï¼Œå¹¶å¯¹textè¿”å›æ–‡æœ¬è¿›è¡Œå‚æ•°æå–ã€‚2ä¸ªèŠ‚ç‚¹é…ç½®éƒ½ä¸€æ ·ã€‚

```
æå–æ ‡é¢˜èµ‹å€¼ç»™titleï¼Œæå–å¹³å°åç§°èµ‹å€¼ç»™sitename
```

![é…ç½®](https://github.com/user-attachments/assets/901886ec-55e2-4bc9-93ee-5117d2827f08)


**æµ‹è¯•ç»“æœ**

![ç»“æœ1](https://github.com/user-attachments/assets/a1c11376-b87d-4d44-82f4-155ae062769d)

**2.åˆå¹¶ä¸º1ä¸ªè¾“å…¥æ¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹**

æ–°å¢ä¸€ä¸ªä»£ç èŠ‚ç‚¹ï¼Œé€‰æ‹©jsä»£ç ã€‚

è¾“å…¥å˜é‡è®¾ç½®å¦‚ä¸‹ï¼š

![è¾“å…¥å˜é‡](https://github.com/user-attachments/assets/a99546fe-b475-4f7f-8721-e77a118d02b2)

è¾“å‡ºå˜é‡è®¾ç½®å¦‚ä¸‹ï¼š

![è¾“å‡ºå˜é‡](https://github.com/user-attachments/assets/43e70bf1-96d4-4d7a-974f-1e9ad2dc2139)

ä»£ç å¦‚ä¸‹ï¼š

```
def main(handle: bool, t_url: str, t_title: str, t_sitename: str, f_url: str, f_sitename: str, f_title: str) -> dict:
    if handle:
        ret = {
            "title": t_title,
            "sitename": t_sitename,
            "url": t_url
        }
    else:
        ret = {
            "title": f_title,
            "sitename": f_sitename,
            "url": f_url
        }
    return ret

```

**æµ‹è¯•ç»“æœ**

![æµ‹è¯•1](https://github.com/user-attachments/assets/eafb3213-40c5-4496-bc51-daf8af979e1d)

![æµ‹è¯•2](https://github.com/user-attachments/assets/51b07337-c493-4cd9-9dfb-a3ef2889743c)

### 3.7.2 è§†é¢‘å’Œå›¾æ–‡ç±»åˆ†æ”¯è¿›è¡Œåˆå¹¶è¾“å‡º

è¿›è¡Œåˆå¹¶æ˜¯å°†è·å–user_access_tokenä½œä¸ºå…¬å…±æ­¥éª¤ã€‚

æˆ‘ä»¬å¯¹å›¾æ–‡ç±»å¤„ç†å†…å®¹æ›´å¤šï¼Œè¿™é‡Œç‚¹å¼€å›¾æ–‡ç±»çš„å¤„ç†æ–‡æœ¬èŠ‚ç‚¹æŸ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸è§†é¢‘ç±»éœ€è¦è¿›è¡Œç»Ÿä¸€çš„å‚æ•°æœ‰titleã€urlã€summaryã€sitenameã€‚

![image](https://github.com/user-attachments/assets/6c1bc93f-70e6-4b36-b633-26e6a900c09b)

æ·»åŠ ```ä»£ç ```èŠ‚ç‚¹ï¼Œå°†è§†é¢‘ç±»çš„titleã€urlã€sitenameä½œä¸ºè¾“å…¥å‚æ•°ï¼Œå›¾æ–‡ç±»çš„titleã€urlã€summaryã€sitenameä¹Ÿä½œä¸ºè¾“å…¥å‚æ•°ã€‚å†åŠ ä¸Šä¸€ä¸ªåˆ¤æ–­å½¢å¼çš„å‚æ•°ï¼šgenreã€‚ä¸€å…±è®¾ç½®8ä¸ªè¾“å…¥å‚æ•°ï¼Œè¾“å‡ºå‚æ•°è®¾ç½®4ä¸ªï¼štitleã€urlã€summaryã€sitename,å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

**<font color=#FF0000>è¿çº¿ã€è¾“å…¥è¾“å‡ºå‚æ•°å¦‚å›¾æ‰€ç¤º</font>**

![è¿çº¿å›¾](https://github.com/user-attachments/assets/79fd400a-42e2-4ef8-bf0f-0baf808b4909)

![è¿çº¿å›¾](https://github.com/user-attachments/assets/27f43a40-3dfd-47bc-8283-112052c853c8)

å¯¹å†™å…¥é£ä¹¦è¡¨æ ¼å‰çš„å¤„ç†æ–‡æœ¬èŠ‚ç‚¹è¿›è¡Œä¿®æ”¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![ä¿®æ”¹é…ç½®å›¾](https://github.com/user-attachments/assets/d0eb249d-4879-4021-bda7-c732f21565c0)

## 3.8 å®Œæ•´æµç¨‹æµ‹è¯•

æˆªæ­¢ä¸Šé¢æ‰€æœ‰æ­¥éª¤ï¼Œæˆ‘ä»¬å®Œæ•´å·¥ä½œæµåº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æ•´ä½“å›¾](https://github.com/user-attachments/assets/4e1bfad7-f940-4c15-ac11-dc3dd84ea454)

åœ¨æµ‹è¯•ä¹‹å‰ï¼Œå¤åˆ¶ä¸‹é¢çš„åœ°å€ï¼Œ```æ›¿æ¢app_id```åå¤åˆ¶åˆ°æµè§ˆå™¨ä¸­è¿›è¡Œæˆæƒã€‚

```
https://open.feishu.cn/open-apis/authen/v1/authorize?app_id=ã€æ›¿æ¢ã€‘&redirect_uri=https%3A%2F%2Fcloud.dify.ai%2F&scope=base:record:create%20base:record:retrieve&state=RANDOMSTATE
```

åˆ†åˆ«æ‰¾äº†å‡ ç±»åˆ†äº«é“¾æ¥è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š

![æµ‹è¯•ç»“æœ](https://github.com/user-attachments/assets/63b004f7-ed0b-4f2d-a0a5-0618ff06119e)

# 4. ä¸‹æœŸé¢„å‘Š

1. æ­å»ºå†…å®¹æ¨èå·¥ä½œæµ
2. æ­å»ºæ¨èAgent
3. æ¥å…¥å¾®ä¿¡
